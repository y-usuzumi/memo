# 数据库

## MyISAM和InnoDB的区别

|Metric|MyISAM|InnoDB|备注|
|---|---|---|---|
|事务处理|不支持|支持||
|外键|不支持|支持||
|行级锁|不支持|支持||
|FULLTEXT类型的索引|支持|不支持||
|保存表行数|是|否||
|AUTO_INCREMENT是否需要单独索引|否|是|MyISAM可以联合索引|
|DELETE FROM table|重建表|一行行删除||
|LOAD TABLE FROM MASTER||不起作用||
|其他||||

## 索引的原理

### BTree

自平衡搜索多叉树。B+Tree是BTree的一个变种。

相当于二叉搜索树和二分查找的合体。

### MongoDB索引原理

#### mmapv1

文件id + offset

#### wiredtiger

key

### 聚簇索引 vs 非聚簇索引

* 聚簇索引：叶子节点是数据节点。
* 非聚簇索引：叶子节点仍然是索引节点，只不过有指向数据块的指针。


## 列式数据库

比如：

|RowId|EmpId|Lastname|Firstname|Salary|
|---|---|---|---|---|
|001|10|Smith|Joe|40000|
|002|12|Jones|Mary|50000|
|003|11|Johnson|Cathy|44000|
|004|22|Jones|Bob|55000|

在列式数据库中的存储结构类似：

```
10:001,12:002,11:003,22:004;
Smith:001,Jones:002,Johnson:003,Jones:004;
Joe:001,Mary:002,Cathy:003,Bob:004;
40000:001,50000:002,44000:003,55000:004;
```
