# MySQL

## MyISAM和InnoDB的区别

|Metric|MyISAM|InnoDB|备注|
|---|---|---|---|
|事务处理|不支持|支持||
|外键|不支持|支持||
|行级锁|不支持|支持||
|FULLTEXT类型的索引|支持|不支持||
|保存表行数|是|否||
|AUTO_INCREMENT是否需要单独索引|否|是|MyISAM可以联合索引|
|DELETE FROM table|重建表|一行行删除||
|LOAD TABLE FROM MASTER||不起作用||
|其他||||

## 索引

类型：

* BTREE
* RTREE
* HASH
* FULLTEXT

### 单列索引

### 多列索引

排序规则定义为：先比较第一列，再比较第二列...，等等。

实际上只生成一个B+Tree树。

## 事务隔离级别

注：仅适用于InnoDB（MyISAM不支持事务）。

并发事务可能产生如下问题：

* 第一类丢失更新：A事务撤销时把B事务的更新数据覆盖了。
* 第二类丢失更新：A事务提交时把B事务的更新数据覆盖了。
* 脏读：读到未提交更新的数据。
* 不可重复读：读到已经提交更新的数据，但一个事务范围内两个相同的查询却返回了不同数据。
* 幻读：读到已提交的插入数据。与不可重复读类似，幻读是查询到了另一个事务已提交的插入数据，而不可重复读是查询到了另一个事务已提交的更新数据。

### 事务隔离级别

#### SERIALIZABLE（可串行化）

一个事务在执行过程中完全看不到其他事务对数据的更改。当两个事务需要同时操作数据库中的相同数据时，如果一个事务已经在操作数据，则另一个事务必须等待。因此称作串行化执行。

#### REPEATABLE READ（可重复读）

一个事务在执行过程中能看到其他事务已经提交的新插入的数据，但不能看到其他事务对已有数据的更新。

#### READ COMMITTED (读到已提交)

一个事务在执行过程中能看到其他事务已经提交的新插入的数据，也能看到其他事务对已有数据的更新。

#### READ UNCOMMITTED (读到未提交)

啥都能看到。




|隔离级别|第一类丢失更新|第二类丢失更新|脏读|不可重复读|幻读|
|---|---|---|---|---|---|
|SERIALIZABLE （串行化）|避免|避免|避免|避免|避免|
|REPEATABLE READ（可重复读）|避免|避免|避免|避免|允许|
|READ COMMITTED （读已提交）|避免|允许|避免|允许|允许|
|READ UNCOMMITTED（读未提交）|避免|允许|允许|允许|允许|
